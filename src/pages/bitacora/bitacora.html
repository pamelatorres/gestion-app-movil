<!--
  Generated template for the BitacoraPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar color="primary">
    <button ion-button menuToggle>
      <ion-icon name="menu"></ion-icon>
    </button>
    <ion-title>Bitacora</ion-title>
  </ion-navbar>

</ion-header>


<ion-content padding text-center class="page-bitacora">
  <ion-card (click)="this.bitacora.observacion != null ? abrirDetalle() : false">
<!--     <img src="img/nin-live.png"/>-->    
    <ion-card-content>
      <ion-card-title>
        Información
        </ion-card-title>
      <p *ngIf="this.bitacora.observacion != null">
        {{(this.bitacora.observacion | truncate: 24) + (this.bitacora.observacion.length > 24 ? '...' : '')}}
      </p>
      <button *ngIf="this.bitacora.observacion == null" (click)="irA('DetallarBitacoraPage')" ion-button round full>Ingresar Descripción</button>
    </ion-card-content>
  </ion-card>
  <ion-card>
    <ion-card-header>
      <h2>Gary Meliman</h2>
      <p>{{this.bitacora.fecha_creacion | date: 'd'}} de {{this.bitacora.fecha_creacion | date: 'MMMM'}} del {{this.bitacora.fecha_creacion | date: 'y'}} a las {{this.bitacora.fecha_creacion | date: 'H:m'}}</p>
    </ion-card-header>

    <ion-list>
      <button ion-item (click)="toggleGroup(1)" [ngClass]="{active: isGroupShown(1)}">
        <ion-icon name="text" item-start></ion-icon>
        Textos
      </button>

      <div *ngIf="isGroupShown(1)">
        <ion-item text-wrap text-justify *ngFor="let texto of textos;">
          <h2 item-center>{{texto.descripcion_anexo}}</h2>
          <p item-center>{{texto.fecha_incorporacion}}</p>
        </ion-item>
      </div>

      <button ion-item (click)="toggleGroup(2)" [ngClass]="{active: isGroupShown(2)}">
        <ion-icon name="document" item-start></ion-icon>
        Documentos
      </button>

      <div *ngIf="isGroupShown(2)">
        <ion-item text-wrap text-justify *ngFor="let documento of documentos;">
          <h2>{{documento.ruta_anexo.split("/").pop()}}</h2>
          <h3>{{documento.descripcion_anexo}}</h3>
          <p item-center>{{documento.fecha_incorporacion}}</p>
        </ion-item>
      </div>

      <button ion-item (click)="toggleGroup(3)" [ngClass]="{active: isGroupShown(3)}">
        <ion-icon name="videocam" item-start></ion-icon>
        Videos
      </button>

      <div *ngIf="isGroupShown(3)">
        <ion-item text-wrap text-justify *ngFor="let video of videos;">
          <h2>{{video.ruta_anexo.split("/").pop()}}</h2>
          <h3>{{video.descripcion_anexo}}</h3>
          <p item-center>{{video.fecha_incorporacion}}</p>
        </ion-item>
      </div>

      <button ion-item (click)="toggleGroup(4)" [ngClass]="{active: isGroupShown(4)}">
        <ion-icon name="camera" item-start></ion-icon>
        Fotos
      </button>

      <div *ngIf="isGroupShown(4)">
        <ion-item text-wrap text-justify *ngFor="let foto of fotos;">
          <h2>{{foto.ruta_anexo.split("/").pop()}}</h2>
          <h3>{{foto.descripcion_anexo}}</h3>
          <p item-center>{{foto.fecha_incorporacion}}</p>
        </ion-item>
      </div>

    </ion-list>
  </ion-card>
  <ion-fab right bottom>
    <button (click)="irA('CrearBitacoraPage')" ion-fab color="primary"><ion-icon name="add"></ion-icon></button>
  </ion-fab>
</ion-content>
